# configuration for the system 

#仅用于web显示需要的端口配置，不带web显示的可以忽略此配置
video.websocket.listen.port=30002
message.websocket.and.http.listen.port=30003

#配置芯片Id号，用npu-smi info 指令可以查看机器上的芯片列表
SystemConfig.deviceId = 1
#需要拉取的视频流数
SystemConfig.channelCount = 20

#每路每帧最多处理多少张人脸
max_face_num_per_frame = 10
#每路的分辨率（宽和高），1080P的视频是streamWidthMax=1920，streamHeightMax=1080
streamWidthMax = 1920
streamHeightMax = 1080

#每路视频跳帧处理间隔，推荐配置为3，对于25fps的视频来说，每秒大约处理8帧
skipInterval = 3

#配置视频流格式
# configuration for the video stream 
stream.format = H264 #H264 or H265

#rtsp流地址
#stream url, the number is SystemConfig.channelCount
stream.ch0 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch1 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch2 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch3 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch4 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch5 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch6 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch7 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch8 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch9 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch10 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch11 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch12 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch13 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch14 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch15 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch16 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch17 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch18 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch19 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch20 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch21 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch22 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch23 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264
stream.ch24 = rtsp://xxx.xxx.xxx.xxx:xxxx/xxxx.264

# configuration for JpegReader, instance 0
#配置注册人脸图的文件夹路径。程序启动会读取ImageReader.jpegPath路径下的jpg文件进行人脸底库录入，建议录入一次后，下次启动不要重复录入，不然程序会报重复录入的问题
#注意：人脸需要正脸、没遮挡的、清晰的，大于200*200，限于检测模型的输入，人脸图尺寸要在448*768这个范围内
ImageReader.jpegPath = ./faces/

# configuration for ImageDecoder, instance 0
ImageDecoder.resizeWidth = 768
ImageDecoder.resizeHeight = 448

# configuration for VideoDecoder, instance 0
VideoDecoder.resizeWidth = 768
VideoDecoder.resizeHeight = 448

FaceDetection.channel_count = 3
FaceDetection.width = 768
FaceDetection.height = 448
FaceDetection.Search.batch_size = 4
FaceDetection.Search.model_path = ./model/face_detection_batch_4.om
FaceDetection.Regist.batch_size = 1
FaceDetection.Regist.model_path = ./model/face_detection_batch_1.om

FaceLandmark.channel_count = 1
FaceLandmark.width = 96
FaceLandmark.height = 96
FaceLandmark.input_channel = 3
FaceLandmark.batch_size = 1
FaceLandmark.keyPointWeight = 1
FaceLandmark.eulerWeight = 1
FaceLandmark.bigFaceWeight = 1
FaceLandmark.minOutputScore = 0
FaceLandmark.minOutputArea = 0
FaceLandmark.model_path = ./model/face_landmark_batch_1.om
FaceLandmark.heatmapWidth = 2304
FaceLandmark.heatmapHeight = 5
FaceLandmark.registModeEnble = 1

# configuration for MOTEmbedding
MOTEmbedding.width = 64
MOTEmbedding.height = 96
MOTEmbedding.input_channel = 3
MOTEmbedding.batch_size = 8
MOTEmbedding.model_path = ./model/face_embedding_batch_8.om
MOTEmbedding.enable = 1
MOTEmbedding.normal_mode = 1 # 0:cpu 1:aicore

# configuration for MOTConnection
MOTConnection.trackThreshold = 0.5
MOTConnection.lostThreshold = 5
MOTConnection.maxNumberFeature = 5
MOTConnection.method = 3
MOTConnection.kIOU = 0.5
MOTConnection.maxSendTime = 15.

QualityEvaluation.heatmapWidth = 2304
QualityEvaluation.heatmapHeight = 5
QualityEvaluation.keyPointWeight = 1
QualityEvaluation.eulerWeight = 1
QualityEvaluation.bigFaceWeight = 1
QualityEvaluation.minOutputScore = 4.5
QualityEvaluation.minOutputArea = 0
QualityEvaluation.maxSendTime = 15.
QualityEvaluation.batch_size = 8
QualityEvaluation.model_path = ./model/face_quality_batch_8.om


WarpAffine.width_output = 112
WarpAffine.height_output = 112

FaceAttribute.width = 112
FaceAttribute.height = 112
FaceAttribute.input_channel = 3
FaceAttribute.batch_size = 4
FaceAttribute.model_path = ./model/face_attribute_batch_4.om

FaceFeature.width = 112
FaceFeature.height = 112
FaceFeature.input_channel = 3
FaceFeature.Search.batch_size = 4
FaceFeature.Search.model_path = ./model/face_feature_batch_4.om
FaceFeature.Regist.batch_size = 1
FaceFeature.Regist.model_path = ./model/face_feature_batch_1.om
FaceFeature.normal_mode = 1 # 0:cpu 1:aicore


#人脸底库检索相似度阈值，对于此值认为是同一个人脸
FaceDetailInfo.similarity_threshold = 0.4